
## 	Before ë³€ìˆ˜

```

import java.util.Arrays;
import java.util.Scanner;

public class NnM_09_visited {
    static int N, M;
    static int[] number;
    static int[] anwser;
    static boolean[] visited;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        N = sc.nextInt();
        M = sc.nextInt();
        number = new int[N];
        anwser = new int[M];
        visited = new boolean[N];

        for (int i = 0; i < N; i++) {
            number[i] = sc.nextInt();
        }
        Arrays.sort(number); // ì •ë ¬í•˜ì—¬ ì¤‘ë³µëœ ìˆ«ìê°€ ì—°ì†ë˜ë„ë¡ ë§Œë“¦

        dfs(0);
    }

    static void dfs(int depth) {
        if (depth == M) {
            for (int i = 0; i < M; i++) {
                System.out.print(anwser[i] + " ");
            }
            System.out.println();
            return;
        }

        int before = -1; // ì´ì „ì— ì„ íƒí•œ ìˆ«ìë¥¼ ì €ì¥í•˜ì—¬ ì¤‘ë³µ ë°©ì§€
        for (int i = 0; i < N; i++) {
            if (!visited[i] && before != number[i]) { // ì´ì „ê³¼ ê°™ì€ ìˆ«ìë¼ë©´ ê±´ë„ˆëœ€
                visited[i] = true;
                anwser[depth] = number[i];
                before = number[i]; // í˜„ì¬ ìˆ«ìë¥¼ beforeì— ì €ì¥ (ë‹¤ìŒ ë£¨í”„ì—ì„œ ì¤‘ë³µ ì²´í¬)
                dfs(depth + 1);
                visited[i] = false;
            }
        }
    }
}


```

**ë°±íŠ¸ë˜í‚¹ (Backtracking) ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•œ ìˆœì—´ ìƒì„± ë¬¸ì œ**ë¥¼ í•´ê²°
ì£¼ì–´ì§„ `N`ê°œì˜ ìˆ«ì ì¤‘ `M`ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” **ëª¨ë“  ìˆ˜ì—´**ì„ ì¶œë ¥í•˜ë˜,  **ì¤‘ë³µëœ ìˆ«ìê°€ í¬í•¨ëœ ê²½ìš°ëŠ” í•œ ë²ˆë§Œ ì¶œë ¥**í•˜ëŠ” ë°©ì‹

----------

## **1ï¸âƒ£ ì½”ë“œ ì„¤ê³„ ë°©ì‹**

### **âœ… ì…ë ¥ ì²˜ë¦¬ ë° ê¸°ë³¸ ì„¤ì •**


```
`static int N, M;
static int[] number;   // ì…ë ¥ë°›ì€ ìˆ«ì ë°°ì—´
static int[] anwser;   // í˜„ì¬ ì„ íƒëœ ìˆ˜ì—´
static boolean[] visited;  // ë°©ë¬¸ ì—¬ë¶€ ì²´í¬ ë°°ì—´` 
```

-   `number`: **ì‚¬ìš©í•  ìˆ«ì ë°°ì—´**
-   `anwser`: **í˜„ì¬ DFS íƒìƒ‰ ì¤‘ ì €ì¥í•˜ëŠ” ìˆ˜ì—´**
-   `visited`: **DFS ë°©ë¬¸ ì²´í¬ ë°°ì—´** (ê°™ì€ ìˆ˜ë¥¼ ì¤‘ë³µ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•¨)

### **âœ… ì •ë ¬ í›„ íƒìƒ‰**



`Arrays.sort(number); // ì •ë ¬í•˜ì—¬ ì¤‘ë³µëœ ìˆ«ìê°€ ì—°ì†ë˜ë„ë¡ ë§Œë“¦` 

-   **ì…ë ¥ëœ ìˆ«ìë¥¼ ì •ë ¬í•˜ì—¬ ì¤‘ë³µëœ ìˆ«ìê°€ ì—°ì†ë˜ë„ë¡ ë§Œë“¦.**
-   ì´ë ‡ê²Œ í•˜ë©´ **ì´ì „ ìˆ«ì(`before`)ì™€ ë¹„êµí•˜ì—¬ ì¤‘ë³µì„ ì‰½ê²Œ ì œê±°í•  ìˆ˜ ìˆìŒ.**

----------

## **2ï¸âƒ£ ë°±íŠ¸ë˜í‚¹ (DFS) ìˆ˜í–‰**

```
`static void dfs(int depth) {
    if (depth == M) {
        for (int i = 0; i < M; i++) {
            System.out.print(anwser[i] + " ");
        }
        System.out.println();
        return;
    }

    int before = -1; // ì´ì „ì— ì„ íƒí•œ ìˆ«ìë¥¼ ì €ì¥í•˜ì—¬ ì¤‘ë³µ ë°©ì§€
    for (int i = 0; i < N; i++) {
        if (!visited[i] && before != number[i]) { // ì´ì „ê³¼ ê°™ì€ ìˆ«ìë¼ë©´ ê±´ë„ˆëœ€
            visited[i] = true;
            anwser[depth] = number[i];
            before = number[i]; // í˜„ì¬ ìˆ«ìë¥¼ beforeì— ì €ì¥ (ë‹¤ìŒ ë£¨í”„ì—ì„œ ì¤‘ë³µ ì²´í¬)
            dfs(depth + 1);
            visited[i] = false;
        }
    }
}` 
```

### **âœ… ì¤‘ë³µ ì œê±° ë¡œì§**

-   `before = -1`ë¡œ ì´ˆê¸°í™”í•˜ì—¬ **ì´ì „ ìˆ«ì ê°’ì„ ì €ì¥**.
-   `if (!visited[i] && before != number[i])`
    -   **ì´ì „ì— ì„ íƒí–ˆë˜ ìˆ«ìì™€ ê°™ìœ¼ë©´ ê±´ë„ˆëœ€** â†’ ê°™ì€ ê¹Šì´(depth)ì—ì„œ ê°™ì€ ìˆ«ìê°€ ë‘ ë²ˆ ë‚˜ì˜¤ì§€ ì•Šê²Œ ë¨.
    -   ì¦‰, **í•œ DFS íŠ¸ë¦¬ì˜ ê°™ì€ ê¹Šì´(depth)ì—ì„œ ê°™ì€ ìˆ«ìë¥¼ ì¤‘ë³µìœ¼ë¡œ ì„ íƒí•˜ì§€ ì•Šë„ë¡ í•œë‹¤.**
-   `before = number[i];`
    -   **í˜„ì¬ ì„ íƒí•œ ìˆ«ìë¥¼ `before`ì— ì €ì¥**í•˜ì—¬ ë‹¤ìŒ ë£¨í”„ì—ì„œ ì¤‘ë³µì¸ì§€ í™•ì¸.

----------

## **3ï¸âƒ£ ì¤‘ë³µ ì œê±° ë°©ì‹ ë¹„êµ**


`Nê³¼ M (9) - LinkedHashSet`

`Set` (`LinkedHashSet`)

**ì™„ì„±ëœ ê²°ê³¼ë¥¼ ì €ì¥í•˜ë©° ì¤‘ë³µ ì œê±°**


`Nê³¼ M (9) - visited[]`

`before` ë³€ìˆ˜ ì‚¬ìš©

**DFS ê³¼ì •ì—ì„œ ì¤‘ë³µ ìˆ«ìë¥¼ ê±´ë„ˆë›°ë„ë¡ í•¨**


`before` ë³€ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ì¤‘ë³µì„ ë°©ì§€
â¡ **ì¶”ê°€ì ì¸ `Set` ì—†ì´ ì¤‘ë³µì´ ì œê±°ë˜ë¯€ë¡œ ë” íš¨ìœ¨ì ì¸ ë°©ì‹**!

----------

## **4ï¸âƒ£ ì‹œê°„ ë³µì¡ë„ ë¶„ì„**

 ì‹œê°„ ë³µì¡ë„ -> ìµœì•…ì˜ ê²½ìš° **O(N!)**

### **ì´ìœ  ë¶„ì„**

-   `N`ê°œì˜ ìˆ«ì ì¤‘ `M`ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜  
    â†’ **`N! / (N-M)!` (ìˆœì—´ ê³µì‹)**
-   íƒìƒ‰ ê³¼ì •ì—ì„œ `before` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ **ê°™ì€ ê¹Šì´ì—ì„œ ì¤‘ë³µëœ ìˆ«ìë¥¼ ì„ íƒí•˜ì§€ ì•Šë„ë¡ í•¨**.
-   **ì¤‘ë³µì´ ì œê±°ë˜ë©´ì„œ íƒìƒ‰ëŸ‰ì´ ì¤„ì–´ë“¤ì§€ë§Œ, ì—¬ì „íˆ ìµœì•…ì˜ ê²½ìš° `O(N!)`ì— ê°€ê¹Œìš´ ì—°ì‚°ëŸ‰ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ.**

----------

## ğŸ”¹ ì •ë¦¬

| **ì„¤ê³„ ìš”ì†Œ** | **ì„¤ëª…** |
|--------------|----------------------------------------------|
| **ì…ë ¥ ë°ì´í„°** | `N`ê°œì˜ ìˆ˜ ì¤‘ `M`ê°œë¥¼ ì„ íƒí•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ìˆœì—´ ìƒì„± |
| **ì¤‘ë³µ ì œê±° ë°©ì‹** | `before` ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°™ì€ ê¹Šì´(depth)ì—ì„œ ì¤‘ë³µ ë°©ì§€ |
| **ë°±íŠ¸ë˜í‚¹ ë™ì‘** | `visited[]` ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ ìˆ«ì ì¤‘ë³µ ì‚¬ìš© ë°©ì§€ |
| **ì í™”ì‹** | `dfs(depth) â†’ dfs(depth + 1)` (ì¬ê·€ í˜¸ì¶œ) |
| **ì‹œê°„ ë³µì¡ë„** | `O(N!)` (ìµœì•…ì˜ ê²½ìš°) |
| **ê³µê°„ ë³µì¡ë„** | `O(N + M)` (ì…ë ¥ ë°°ì—´ + ë°©ë¬¸ ë°°ì—´) |
| **ìµœì í™” ì—¬ë¶€** | âœ… `Set` ì—†ì´ `before` ë³€ìˆ˜ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ì¤‘ë³µ ì œê±° |
